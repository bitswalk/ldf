{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Linux Distribution Factory","text":"<p>Linux Distribution Factory (LDF) is a modern, modular platform for creating and managing custom Linux distributions. It provides a REST API server, a web interface, and a CLI client to accommodate different workflows.</p>"},{"location":"#components","title":"Components","text":"Component Description Status ldfd Core REST API server (Go, Gin) Production-ready WebUI Web interface (SolidJS, TailwindCSS) Functional ldfctl CLI client (Go, Cobra) Planned"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Distribution management -- Create, configure, and track custom Linux distributions with full component selection</li> <li>Component catalog -- Kernel versions, init systems, filesystems, bootloaders, security frameworks, and more</li> <li>Source tracking -- Automatic upstream version discovery from GitHub, GitLab, Gitea, Codeberg, Forgejo, and HTTP directories</li> <li>Artifact storage -- Local filesystem or S3-compatible backends (AWS, MinIO, GarageHQ)</li> <li>Download management -- Worker pool with retry, verification, and progress tracking</li> <li>Authentication -- JWT-based auth with role-based access control</li> <li>API documentation -- Interactive Swagger UI at <code>/swagger/index.html</code></li> </ul>"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li>Getting Started -- Build and run LDF from source</li> <li>Architecture -- System design and component overview</li> <li>Configuration -- All server settings and config file reference</li> <li>Deployment -- Docker, systemd, and bare metal deployment</li> <li>Sources -- Source management and forge integration</li> </ul>"},{"location":"architecture/","title":"Architecture","text":""},{"location":"architecture/#system-overview","title":"System Overview","text":"<pre><code>                          +------------------+\n                          |     WebUI         |\n                          | (SolidJS SPA)     |\n                          +--------+---------+\n                                   |\n                                   | HTTP/JSON\n                                   |\n+------------------+      +--------+---------+      +------------------+\n|    ldfctl        +-----&gt;+     ldfd          +-----&gt;+   Storage        |\n|  (CLI client)    | HTTP |  (API server)     |      | Local / S3      |\n+------------------+      +----+----+----+---+      +------------------+\n                               |    |    |\n                    +----------+    |    +----------+\n                    |               |               |\n             +------+---+   +------+---+   +-------+------+\n             | SQLite   |   | Download |   | Forge        |\n             | Database |   | Manager  |   | Registry     |\n             +----------+   +----------+   +--------------+\n</code></pre> <p>LDF follows an API-first design. The server (<code>ldfd</code>) is a pure REST API that returns JSON. The WebUI and CLI client are separate consumers of this API.</p>"},{"location":"architecture/#repository-layout","title":"Repository Layout","text":"<pre><code>ldf/\n  src/\n    ldfd/           # API server (Go, Gin)\n      api/          # HTTP handlers (11 modules)\n      core/         # Server bootstrap, config, middleware\n      auth/         # JWT service, user management\n      db/           # SQLite database, migrations, repositories\n      download/     # Download manager, version discovery\n      forge/        # Forge detection, version filtering\n      storage/      # Storage backends (local, S3)\n      docs/         # Generated OpenAPI spec\n    webui/          # Web interface (SolidJS, Bun, Vite)\n    ldfctl/         # CLI client (stub)\n    common/         # Shared Go libraries\n      cli/          # Cobra/Viper helpers\n      logs/         # Logging abstraction\n      paths/        # Path expansion utilities\n      version/      # Version info struct\n  tools/\n    docker/         # Dockerfile\n  docs/             # MkDocs documentation (this site)\n</code></pre>"},{"location":"architecture/#server-internals","title":"Server Internals","text":""},{"location":"architecture/#gin-router-and-middleware","title":"Gin Router and Middleware","text":"<p>ldfd uses the Gin web framework. The middleware stack processes requests in this order:</p> <ol> <li>Recovery -- Catches panics and returns 500</li> <li>CORS -- Handles cross-origin requests for WebUI</li> <li>Logging -- Logs request method, path, status, and latency</li> </ol>"},{"location":"architecture/#api-modules","title":"API Modules","text":"<p>The API is organized into 11 handler modules under <code>src/ldfd/api/</code>:</p> Module Prefix Endpoints Description base <code>/</code>, <code>/v1/</code> 3 Root discovery, health, version auth <code>/auth/</code> 5 Login, logout, create, refresh, validate roles <code>/v1/roles</code> 5 Role CRUD for RBAC distributions <code>/v1/distributions</code> 8 Distribution lifecycle management components <code>/v1/components</code> 12 Component catalog and versions sources <code>/v1/sources</code> 11 Upstream source management downloads <code>/v1/distributions/{id}/downloads</code> 7 Download job management artifacts <code>/v1/distributions/{id}/artifacts</code> 7 Artifact upload, download, storage settings <code>/v1/settings</code> 4 Server configuration (root only) forge <code>/v1/forge</code> 4 Forge detection and filter preview branding <code>/v1/branding</code> 4 Logo and favicon management langpacks <code>/v1/language-packs</code> 4 Custom language pack management <p>Total: 74 operations across 52 URL paths.</p>"},{"location":"architecture/#authentication","title":"Authentication","text":"<p>ldfd uses JWT (JSON Web Tokens) for authentication:</p> <ul> <li>Login returns an access token and a refresh token</li> <li>Access tokens are short-lived; refresh tokens allow obtaining new access tokens</li> <li>Tokens are passed via the <code>Authorization: Bearer &lt;token&gt;</code> header</li> <li>The <code>X-Subject-Token</code> header is used in login/refresh responses</li> <li>Role-based access control (RBAC): endpoints require either authenticated access or root-level access</li> </ul>"},{"location":"architecture/#download-manager","title":"Download Manager","text":"<p>The download manager handles fetching component sources from upstream:</p> <ul> <li>Worker pool with configurable concurrency</li> <li>HTTP and Git download support</li> <li>Automatic retry on failure</li> <li>Checksum verification</li> <li>Progress tracking per job</li> <li>Jobs are persisted in the database</li> </ul>"},{"location":"architecture/#forge-registry","title":"Forge Registry","text":"<p>The forge registry detects repository hosting platforms and extracts version information:</p> <ul> <li>Supports GitHub, GitLab, Gitea, Codeberg, Forgejo, and generic HTTP directories</li> <li>Auto-detects forge type from repository URL</li> <li>Discovers available versions (tags/releases) from upstream</li> <li>Provides default URL templates and version filters per forge type</li> </ul>"},{"location":"architecture/#storage-backends","title":"Storage Backends","text":"<p>Artifact storage is pluggable:</p> <ul> <li>Local -- Files stored on the local filesystem (default: <code>~/.ldfd/artifacts</code>)</li> <li>S3 -- S3-compatible object storage with support for AWS S3, MinIO, GarageHQ, and generic providers</li> </ul> <p>See Configuration for storage setup details.</p>"},{"location":"architecture/#database","title":"Database","text":"<p>ldfd uses an in-memory SQLite database with optional persistence:</p> <ul> <li>On startup, the database is loaded from disk (if a persist file exists)</li> <li>On shutdown, the database is saved to disk</li> <li>Migrations run automatically on startup (<code>src/ldfd/db/migrations/</code>)</li> <li>The persist path is configurable via <code>database.path</code></li> </ul>"},{"location":"architecture/#key-tables","title":"Key Tables","text":"Table Purpose distributions Distribution definitions and config components Component catalog entries upstream_sources Source definitions (system + user) source_versions Discovered upstream versions download_jobs Download job state and progress users User accounts roles RBAC role definitions settings Runtime configuration overrides language_packs Custom UI translations"},{"location":"architecture/#webui","title":"WebUI","text":"<p>The WebUI is a single-page application built with:</p> <ul> <li>SolidJS -- Reactive UI framework</li> <li>Bun -- JavaScript runtime and package manager</li> <li>Vite 7 -- Build tool and dev server</li> <li>TailwindCSS 4 -- Utility-first CSS</li> <li>Phosphor Icons -- Icon set</li> <li>Departure Mono -- Monospace font</li> </ul> <p>The WebUI communicates with ldfd over HTTP/JSON. It is not embedded in the server binary -- it runs as a separate static asset served by ldfd or a reverse proxy.</p>"},{"location":"architecture/#internationalization","title":"Internationalization","text":"<p>The WebUI supports multiple languages via a translation system:</p> <ul> <li>Built-in locales: English, French, German</li> <li>Custom language packs can be uploaded via the <code>/v1/language-packs</code> API</li> <li>Language packs are <code>.tar.xz</code>, <code>.tar.gz</code>, or <code>.xz</code> archives containing JSON translation files</li> </ul>"},{"location":"configuration/","title":"Configuration","text":""},{"location":"configuration/#config-file-locations","title":"Config File Locations","text":"<p>ldfd searches for a configuration file named <code>ldfd.yaml</code> (or <code>ldfd.yml</code>) in these paths, in order:</p> <ol> <li>Path specified via <code>--config</code> flag</li> <li><code>/etc/ldfd/</code></li> <li><code>/opt/ldfd/</code></li> <li><code>~/.ldfd/</code></li> </ol> <pre><code># Use a specific config file\nldfd --config /path/to/ldfd.yml\n</code></pre>"},{"location":"configuration/#configuration-precedence","title":"Configuration Precedence","text":"<p>Settings are resolved in this order (highest priority first):</p> <ol> <li>Environment variables -- <code>LDFD_</code> prefix (e.g., <code>LDFD_SERVER_PORT=9000</code>)</li> <li>CLI flags -- (e.g., <code>--port 9000</code>)</li> <li>Config file -- YAML format</li> <li>Defaults -- Hardcoded in the application</li> </ol>"},{"location":"configuration/#environment-variables","title":"Environment Variables","text":"<p>Environment variables use the <code>LDFD_</code> prefix with dots replaced by underscores:</p> Config Key Environment Variable <code>server.port</code> <code>LDFD_SERVER_PORT</code> <code>log.level</code> <code>LDFD_LOG_LEVEL</code> <code>storage.s3.access_key</code> <code>LDFD_STORAGE_S3_ACCESS_KEY</code> <p>This is useful for passing secrets without writing them to config files:</p> <pre><code>export LDFD_STORAGE_S3_ACCESS_KEY=\"your-access-key\"\nexport LDFD_STORAGE_S3_SECRET_KEY=\"your-secret-key\"\nldfd\n</code></pre>"},{"location":"configuration/#cli-flags","title":"CLI Flags","text":"<p>Common flags available on the <code>ldfd</code> command:</p> Flag Config Key Default <code>--port</code>, <code>-p</code> <code>server.port</code> <code>8443</code> <code>--bind</code>, <code>-b</code> <code>server.bind</code> <code>0.0.0.0</code> <code>--config</code> -- (search paths) <code>--log-output</code> <code>log.output</code> <code>auto</code> <code>--log-level</code> <code>log.level</code> <code>info</code> <code>--db-path</code> <code>database.path</code> <code>~/.ldfd/ldfd.db</code> <code>--storage-type</code> <code>storage.type</code> <code>local</code> <code>--storage-path</code> <code>storage.local.path</code> <code>~/.ldfd/artifacts</code> <code>--s3-endpoint</code> <code>storage.s3.endpoint</code> (empty) <code>--s3-region</code> <code>storage.s3.region</code> <code>us-east-1</code> <code>--s3-bucket</code> <code>storage.s3.bucket</code> <code>ldf-distributions</code> <code>--s3-access-key</code> <code>storage.s3.access_key</code> (empty) <code>--s3-secret-key</code> <code>storage.s3.secret_key</code> (empty)"},{"location":"configuration/#settings-reference","title":"Settings Reference","text":"<p>All configurable settings with their types, defaults, and descriptions:</p>"},{"location":"configuration/#server","title":"Server","text":"Key Type Default Reboot Description <code>server.port</code> int <code>8443</code> Yes Port for the HTTP server <code>server.bind</code> string <code>0.0.0.0</code> Yes Network address to bind to"},{"location":"configuration/#logging","title":"Logging","text":"Key Type Default Reboot Description <code>log.output</code> string <code>auto</code> No Log destination: <code>stdout</code>, <code>journald</code>, or <code>auto</code> <code>log.level</code> string <code>info</code> No Minimum log level: <code>debug</code>, <code>info</code>, <code>warn</code>, <code>error</code> <p>Log level can be changed at runtime via the settings API without restarting the server.</p>"},{"location":"configuration/#database","title":"Database","text":"Key Type Default Reboot Description <code>database.path</code> string <code>~/.ldfd/ldfd.db</code> Yes Path to persist the in-memory SQLite database on shutdown"},{"location":"configuration/#storage","title":"Storage","text":"Key Type Default Reboot Description <code>storage.type</code> string <code>local</code> Yes Storage backend: <code>local</code> or <code>s3</code> <code>storage.local.path</code> string <code>~/.ldfd/artifacts</code> Yes Root directory for local artifact storage"},{"location":"configuration/#s3-storage","title":"S3 Storage","text":"Key Type Default Reboot Description <code>storage.s3.provider</code> string (empty) Yes S3 provider: <code>garage</code>, <code>minio</code>, <code>aws</code>, or <code>other</code> <code>storage.s3.endpoint</code> string (empty) Yes S3 base domain (e.g., <code>s3.example.com</code>) <code>storage.s3.region</code> string <code>us-east-1</code> Yes AWS/S3 region <code>storage.s3.bucket</code> string <code>ldf-distributions</code> Yes S3 bucket name <code>storage.s3.access_key</code> string (empty) Yes S3 access key ID (sensitive) <code>storage.s3.secret_key</code> string (empty) Yes S3 secret access key (sensitive) <p>Sensitive values are masked in API responses unless the <code>?reveal=true</code> query parameter is used.</p>"},{"location":"configuration/#webui","title":"WebUI","text":"Key Type Default Reboot Description <code>webui.devmode</code> bool <code>false</code> No Enable developer mode (debug console and logs) <code>webui.app_name</code> string (empty) No Custom application name in header and browser tab (max 32 characters)"},{"location":"configuration/#sync","title":"Sync","text":"Key Type Default Reboot Description <code>sync.cache_duration</code> int <code>60</code> No Minimum minutes between automatic version syncs for a source (0 to disable caching)"},{"location":"configuration/#runtime-settings-api","title":"Runtime Settings API","text":"<p>Settings can be read and modified at runtime via the REST API (requires root access):</p> <pre><code># List all settings\ncurl -H \"Authorization: Bearer $TOKEN\" http://localhost:8443/v1/settings\n\n# Get a single setting\ncurl -H \"Authorization: Bearer $TOKEN\" http://localhost:8443/v1/settings/log.level\n\n# Update a setting\ncurl -X PUT -H \"Authorization: Bearer $TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  http://localhost:8443/v1/settings/log.level \\\n  -d '{\"value\": \"debug\"}'\n</code></pre> <p>Settings marked \"Reboot: Yes\" require a server restart to take effect. Settings marked \"Reboot: No\" are applied immediately.</p>"},{"location":"configuration/#complete-config-file-example","title":"Complete Config File Example","text":"<pre><code># ldfd.yml -- Full configuration reference\n# See docs/samples/ldfd.yml for a copy of this file.\n\n# Server settings\nserver:\n  port: 8443\n  bind: \"0.0.0.0\"\n\n# Logging\nlog:\n  output: \"auto\"    # auto, stdout, journald\n  level: \"info\"     # debug, info, warn, error\n\n# Database persistence\ndatabase:\n  path: \"~/.ldfd/ldfd.db\"\n\n# Artifact storage\nstorage:\n  type: \"local\"     # local or s3\n\n  local:\n    path: \"~/.ldfd/artifacts\"\n\n  # S3-compatible storage (uncomment to use)\n  # s3:\n  #   provider: \"garage\"    # garage, minio, aws, other\n  #   endpoint: \"s3.example.com\"\n  #   region: \"us-east-1\"\n  #   bucket: \"ldf-distributions\"\n  #   access_key: \"\"        # Use LDFD_STORAGE_S3_ACCESS_KEY env var instead\n  #   secret_key: \"\"        # Use LDFD_STORAGE_S3_SECRET_KEY env var instead\n\n# WebUI customization\nwebui:\n  devmode: false\n  app_name: \"\"\n\n# Version sync behavior\nsync:\n  cache_duration: 60  # minutes (0 to disable)\n</code></pre>"},{"location":"deployment/","title":"Deployment","text":""},{"location":"deployment/#bare-metal","title":"Bare Metal","text":""},{"location":"deployment/#1-build-the-binaries","title":"1. Build the binaries","text":"<pre><code>git clone https://github.com/bitswalk/ldf.git\ncd ldf\ntask build\n</code></pre> <p>This produces <code>build/bin/ldfd</code> and <code>build/bin/ldfctl</code>.</p>"},{"location":"deployment/#2-install","title":"2. Install","text":"<pre><code>sudo cp build/bin/ldfd /usr/local/bin/\nsudo cp build/bin/ldfctl /usr/local/bin/\n</code></pre>"},{"location":"deployment/#3-create-a-service-user","title":"3. Create a service user","text":"<pre><code>sudo useradd -r -s /usr/sbin/nologin -d /var/lib/ldfd ldfd\nsudo mkdir -p /var/lib/ldfd\nsudo chown ldfd:ldfd /var/lib/ldfd\n</code></pre>"},{"location":"deployment/#4-create-configuration","title":"4. Create configuration","text":"<pre><code>sudo mkdir -p /etc/ldfd\nsudo cp docs/samples/ldfd.yml /etc/ldfd/ldfd.yml\nsudo chown ldfd:ldfd /etc/ldfd/ldfd.yml\n</code></pre> <p>Edit <code>/etc/ldfd/ldfd.yml</code> to set your desired configuration. See Configuration for all options.</p>"},{"location":"deployment/#5-run","title":"5. Run","text":"<pre><code>sudo -u ldfd ldfd --config /etc/ldfd/ldfd.yml\n</code></pre>"},{"location":"deployment/#systemd","title":"Systemd","text":"<p>A sample systemd unit file is provided at <code>docs/samples/ldfd.service</code>.</p>"},{"location":"deployment/#1-install-the-service","title":"1. Install the service","text":"<p>After building and installing the binary (see Bare Metal steps 1-4 above):</p> <pre><code>sudo cp docs/samples/ldfd.service /etc/systemd/system/ldfd.service\nsudo systemctl daemon-reload\n</code></pre>"},{"location":"deployment/#2-configure-secrets-optional","title":"2. Configure secrets (optional)","text":"<p>For S3 storage credentials, create an environment file:</p> <pre><code>sudo touch /etc/ldfd/ldfd.env\nsudo chmod 600 /etc/ldfd/ldfd.env\nsudo chown ldfd:ldfd /etc/ldfd/ldfd.env\n</code></pre> <p>Add credentials to <code>/etc/ldfd/ldfd.env</code>:</p> <pre><code>LDFD_STORAGE_S3_ACCESS_KEY=your-access-key\nLDFD_STORAGE_S3_SECRET_KEY=your-secret-key\n</code></pre> <p>Then uncomment the <code>EnvironmentFile</code> line in the service file:</p> <pre><code>EnvironmentFile=-/etc/ldfd/ldfd.env\n</code></pre>"},{"location":"deployment/#3-start-the-service","title":"3. Start the service","text":"<pre><code>sudo systemctl enable ldfd\nsudo systemctl start ldfd\nsudo systemctl status ldfd\n</code></pre>"},{"location":"deployment/#4-view-logs","title":"4. View logs","text":"<pre><code>sudo journalctl -u ldfd -f\n</code></pre>"},{"location":"deployment/#service-file-details","title":"Service file details","text":"<p>The provided unit file includes security hardening:</p> <ul> <li>Runs as a dedicated <code>ldfd</code> user (non-root)</li> <li><code>ProtectSystem=strict</code> -- Read-only filesystem except allowed paths</li> <li><code>ProtectHome=yes</code> -- No access to home directories</li> <li><code>PrivateTmp=yes</code> -- Isolated <code>/tmp</code></li> <li><code>NoNewPrivileges=yes</code> -- Cannot gain additional privileges</li> <li><code>ReadWritePaths=/var/lib/ldfd</code> -- Only writable path</li> <li><code>LimitNOFILE=65536</code> -- File descriptor limit</li> <li>Automatic restart on failure with 5-second delay</li> </ul>"},{"location":"deployment/#docker","title":"Docker","text":"<p>A multi-stage Dockerfile is provided at <code>tools/docker/Dockerfile</code>.</p>"},{"location":"deployment/#build-the-image","title":"Build the image","text":"<pre><code>docker build -f tools/docker/Dockerfile -t ldf:latest .\n</code></pre>"},{"location":"deployment/#run-the-container","title":"Run the container","text":"<pre><code>docker run -d \\\n  --name ldfd \\\n  -p 8443:8443 \\\n  -v ldfd-data:/var/lib/ldfd \\\n  ldf:latest\n</code></pre>"},{"location":"deployment/#with-custom-configuration","title":"With custom configuration","text":"<p>Mount a config file:</p> <pre><code>docker run -d \\\n  --name ldfd \\\n  -p 8443:8443 \\\n  -v ldfd-data:/var/lib/ldfd \\\n  -v /path/to/ldfd.yml:/opt/ldf/config/ldfd.yml:ro \\\n  ldf:latest\n</code></pre>"},{"location":"deployment/#with-s3-storage","title":"With S3 storage","text":"<p>Pass credentials via environment variables:</p> <pre><code>docker run -d \\\n  --name ldfd \\\n  -p 8443:8443 \\\n  -v ldfd-data:/var/lib/ldfd \\\n  -e LDFD_STORAGE_S3_ENDPOINT=s3.example.com \\\n  -e LDFD_STORAGE_S3_PROVIDER=garage \\\n  -e LDFD_STORAGE_S3_BUCKET=ldf-distributions \\\n  -e LDFD_STORAGE_S3_ACCESS_KEY=your-key \\\n  -e LDFD_STORAGE_S3_SECRET_KEY=your-secret \\\n  ldf:latest\n</code></pre>"},{"location":"deployment/#container-details","title":"Container details","text":"<p>The Docker image:</p> <ul> <li>Uses Alpine Linux as the runtime base</li> <li>Runs as a non-root <code>ldf</code> user (uid 1000)</li> <li>Includes build tools for kernel compilation (gcc, make, linux-headers)</li> <li>Copies <code>ldfd</code>, <code>ldfctl</code> binaries and WebUI assets</li> <li>Uses the sample config at <code>/opt/ldf/config/ldfd.yml</code></li> <li>Exposes port 8443</li> </ul>"},{"location":"deployment/#storage-setup","title":"Storage Setup","text":""},{"location":"deployment/#local-storage","title":"Local storage","text":"<p>Local storage is the default. Artifacts are stored in a directory on the filesystem:</p> <pre><code>storage:\n  type: local\n  local:\n    path: /var/lib/ldfd/artifacts\n</code></pre> <p>Ensure the ldfd user has write access to this directory.</p>"},{"location":"deployment/#s3-compatible-storage","title":"S3-compatible storage","text":"<p>ldfd supports four S3 provider types, each with different URL construction:</p>"},{"location":"deployment/#garagehq","title":"GarageHQ","text":"<pre><code>storage:\n  type: s3\n  s3:\n    provider: garage\n    endpoint: s3.example.com\n    region: garage\n    bucket: ldf-distributions\n</code></pre> <p>Garage uses <code>api.{endpoint}</code> for the API and <code>{bucket}.{endpoint}</code> for web access.</p>"},{"location":"deployment/#minio","title":"MinIO","text":"<pre><code>storage:\n  type: s3\n  s3:\n    provider: minio\n    endpoint: minio.example.com:9000\n    region: us-east-1\n    bucket: ldf-distributions\n</code></pre> <p>MinIO uses the endpoint directly with path-style addressing.</p>"},{"location":"deployment/#aws-s3","title":"AWS S3","text":"<pre><code>storage:\n  type: s3\n  s3:\n    provider: aws\n    region: us-east-1\n    bucket: ldf-distributions\n</code></pre> <p>AWS uses <code>s3.{region}.amazonaws.com</code> automatically.</p>"},{"location":"deployment/#generic-s3-compatible","title":"Generic S3-compatible","text":"<pre><code>storage:\n  type: s3\n  s3:\n    provider: other\n    endpoint: s3.example.com\n    region: us-east-1\n    bucket: ldf-distributions\n</code></pre> <p>Generic provider uses path-style addressing with the endpoint directly.</p> <p>For all S3 providers, pass credentials via environment variables rather than config files:</p> <pre><code>export LDFD_STORAGE_S3_ACCESS_KEY=\"your-access-key\"\nexport LDFD_STORAGE_S3_SECRET_KEY=\"your-secret-key\"\n</code></pre>"},{"location":"getting-started/","title":"Getting Started","text":"<p>This guide covers building LDF from source and running it locally.</p>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<ul> <li>Go 1.24+ -- golang.org/dl</li> <li>Taskfile -- taskfile.dev/installation</li> <li>Bun -- bun.sh (required for building the WebUI)</li> <li>Git or Sapling SCM</li> </ul>"},{"location":"getting-started/#building-from-source","title":"Building from Source","text":"<p>Clone the repository and build all components:</p> <pre><code>git clone https://github.com/bitswalk/ldf.git\ncd ldf\n\n# Build everything (server, CLI, WebUI)\ntask build\n\n# Or build individual components\ntask build:srv      # Server only\ntask build:webui    # WebUI only\n</code></pre> <p>For development builds with debug symbols:</p> <pre><code>task build:dev\n</code></pre> <p>Build artifacts are placed in <code>build/bin/</code>.</p>"},{"location":"getting-started/#running-the-server","title":"Running the Server","text":"<p>Start the server in development mode:</p> <pre><code>task run:srv:dev\n</code></pre> <p>This starts ldfd with stdout logging and debug-level output. The server listens on port 8443 by default.</p> <p>To run the production binary directly:</p> <pre><code>./build/bin/ldfd\n</code></pre> <p>You can specify a configuration file:</p> <pre><code>./build/bin/ldfd --config /path/to/ldfd.yml\n</code></pre> <p>See Configuration for all available options.</p>"},{"location":"getting-started/#accessing-the-webui","title":"Accessing the WebUI","text":"<p>Once ldfd is running, open your browser at:</p> <pre><code>http://localhost:8443\n</code></pre> <p>The WebUI is a SolidJS single-page application served by ldfd.</p>"},{"location":"getting-started/#api-documentation","title":"API Documentation","text":"<p>Interactive API documentation is available at:</p> <pre><code>http://localhost:8443/swagger/index.html\n</code></pre> <p>The Swagger UI lists all 74 API operations with request/response schemas, parameters, and authentication requirements.</p>"},{"location":"getting-started/#api-discovery","title":"API Discovery","text":"<p>The root endpoint provides API discovery:</p> <pre><code>curl http://localhost:8443/\n</code></pre> <pre><code>{\n  \"name\": \"ldfd\",\n  \"description\": \"LDF Platform API Server\",\n  \"version\": \"...\",\n  \"api_versions\": [\"v1\"],\n  \"endpoints\": {\n    \"health\": \"/v1/health\",\n    \"version\": \"/v1/version\",\n    \"api_v1\": \"/v1/\",\n    \"docs\": \"/swagger/index.html\",\n    \"auth\": {\n      \"create\": \"/auth/create\",\n      \"login\": \"/auth/login\",\n      \"logout\": \"/auth/logout\",\n      \"refresh\": \"/auth/refresh\",\n      \"validate\": \"/auth/validate\"\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/#first-steps","title":"First Steps","text":""},{"location":"getting-started/#1-create-an-account","title":"1. Create an Account","text":"<pre><code>curl -X POST http://localhost:8443/auth/create \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"auth\": {\n      \"identity\": {\n        \"methods\": [\"password\"],\n        \"password\": {\n          \"user\": {\n            \"name\": \"admin\",\n            \"password\": \"your-password\"\n          }\n        }\n      }\n    }\n  }'\n</code></pre>"},{"location":"getting-started/#2-log-in","title":"2. Log In","text":"<pre><code>curl -X POST http://localhost:8443/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"auth\": {\n      \"identity\": {\n        \"methods\": [\"password\"],\n        \"password\": {\n          \"user\": {\n            \"name\": \"admin\",\n            \"password\": \"your-password\"\n          }\n        }\n      }\n    }\n  }'\n</code></pre> <p>The response includes a JWT token in the <code>X-Subject-Token</code> header. Use it in subsequent requests:</p> <pre><code>export TOKEN=\"your-jwt-token\"\n</code></pre>"},{"location":"getting-started/#3-create-a-distribution","title":"3. Create a Distribution","text":"<pre><code>curl -X POST http://localhost:8443/v1/distributions \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer $TOKEN\" \\\n  -d '{\n    \"name\": \"my-distro\",\n    \"description\": \"My custom Linux distribution\"\n  }'\n</code></pre>"},{"location":"getting-started/#4-browse-components","title":"4. Browse Components","text":"<pre><code>curl http://localhost:8443/v1/components\n</code></pre>"},{"location":"getting-started/#5-check-health","title":"5. Check Health","text":"<pre><code>curl http://localhost:8443/v1/health\n</code></pre>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration -- Customize server settings</li> <li>Deployment -- Deploy with Docker or systemd</li> <li>Sources -- Set up upstream version tracking</li> <li>Architecture -- Understand the system design</li> </ul>"},{"location":"sources/","title":"Sources","text":"<p>Sources represent upstream repositories from which LDF discovers and tracks component versions. Each source points to a URL (typically a Git forge) and periodically syncs available versions.</p>"},{"location":"sources/#concepts","title":"Concepts","text":""},{"location":"sources/#what-is-a-source","title":"What is a source?","text":"<p>A source is a link between a component in LDF and an upstream repository. For example, a \"Linux kernel\" component might have a source pointing to <code>https://github.com/torvalds/linux</code>. LDF queries the source to discover available versions (tags/releases).</p>"},{"location":"sources/#system-sources-vs-user-sources","title":"System sources vs user sources","text":"<ul> <li>System sources -- Pre-configured sources that ship with LDF's default component catalog. These are managed by the platform and cannot be deleted by regular users.</li> <li>User sources -- Sources created by users to track custom or additional upstream repositories. Users can create, update, and delete their own sources.</li> </ul> <p>Both types use the same API endpoints. Access control is handled based on ownership and the <code>is_system</code> flag.</p>"},{"location":"sources/#forge-detection","title":"Forge Detection","text":"<p>When creating a source, LDF automatically detects the hosting platform (forge) from the URL:</p> Forge Example URL Detection Pattern GitHub <code>https://github.com/torvalds/linux</code> <code>github.com</code> GitLab <code>https://gitlab.com/group/project</code> <code>gitlab.com</code> or self-hosted Gitea <code>https://gitea.example.com/org/repo</code> Gitea API detection Codeberg <code>https://codeberg.org/org/repo</code> <code>codeberg.org</code> Forgejo <code>https://forgejo.example.com/org/repo</code> Forgejo API detection Generic <code>https://example.com/releases/</code> Fallback for HTTP directories <p>You can also use the forge detection API to test URL detection:</p> <pre><code>curl -X POST -H \"Authorization: Bearer $TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  http://localhost:8443/v1/forge/detect \\\n  -d '{\"url\": \"https://github.com/torvalds/linux\"}'\n</code></pre> <p>The response includes the detected forge type, repository info, and suggested defaults (URL template and version filter).</p>"},{"location":"sources/#version-discovery","title":"Version Discovery","text":"<p>Once a source is created, LDF discovers available versions by querying the upstream forge:</p> <ul> <li>GitHub/GitLab/Gitea/Codeberg/Forgejo -- Fetches tags and releases via the platform API</li> <li>Generic HTTP -- Parses directory listings for version-like entries</li> </ul> <p>Versions are cached in the database. The sync interval is controlled by the <code>sync.cache_duration</code> setting (default: 60 minutes). Set to <code>0</code> to disable caching and always fetch fresh data.</p>"},{"location":"sources/#manual-sync","title":"Manual sync","text":"<p>Trigger a version sync for a specific source:</p> <pre><code>curl -X POST -H \"Authorization: Bearer $TOKEN\" \\\n  http://localhost:8443/v1/sources/{id}/sync\n</code></pre> <p>Check sync status:</p> <pre><code>curl -H \"Authorization: Bearer $TOKEN\" \\\n  http://localhost:8443/v1/sources/{id}/sync/status\n</code></pre>"},{"location":"sources/#startup-sync","title":"Startup sync","text":"<p>When ldfd starts, it automatically triggers a background version sync for all sources. This ensures the version cache is fresh without waiting for the first scheduled sync.</p>"},{"location":"sources/#version-filtering","title":"Version Filtering","text":"<p>Sources can have version filters that control which upstream versions are included. Filters use a comma-separated pattern syntax:</p>"},{"location":"sources/#filter-syntax","title":"Filter syntax","text":"<ul> <li><code>*</code> matches any sequence of characters</li> <li><code>!pattern</code> excludes versions matching the pattern</li> <li>Multiple patterns are comma-separated</li> <li>Exclusions take precedence over inclusions</li> </ul>"},{"location":"sources/#examples","title":"Examples","text":"Filter Effect <code>!*-rc*</code> Exclude release candidates <code>!*-rc*,!*alpha*,!*beta*</code> Exclude pre-release versions <code>6.12.*,6.6.*,6.1.*</code> Only include specific major.minor versions <code>!*-rc*,!next-*</code> Exclude RC and next-branch versions"},{"location":"sources/#common-filter-presets","title":"Common filter presets","text":"<p>LDF provides built-in filter presets accessible via the API:</p> Preset Filter <code>stable-only</code> <code>!*-rc*,!*alpha*,!*beta*,!*-dev*,!*-pre*,!*-snapshot*,!*-nightly*</code> <code>no-rc</code> <code>!*-rc*</code> <code>lts-only</code> <code>6.12.*,6.6.*,6.1.*,5.15.*,5.10.*,5.4.*</code> <code>latest-major</code> <code>6.*</code> <code>kernel-stable</code> <code>!*-rc*,!next-*</code> <code>kernel-lts</code> <code>6.12.*,6.6.*,6.1.*,5.15.*,5.10.*,5.4.*,4.19.*,4.14.*,!*-rc*</code> <p>List available presets:</p> <pre><code>curl -H \"Authorization: Bearer $TOKEN\" \\\n  http://localhost:8443/v1/forge/common-filters\n</code></pre>"},{"location":"sources/#filter-preview","title":"Filter preview","text":"<p>Before applying a filter, you can preview its effect on actual upstream versions:</p> <pre><code>curl -X POST -H \"Authorization: Bearer $TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  http://localhost:8443/v1/forge/preview-filter \\\n  -d '{\n    \"url\": \"https://github.com/torvalds/linux\",\n    \"version_filter\": \"!*-rc*,!next-*\"\n  }'\n</code></pre> <p>The response shows each version with whether it would be included or excluded, and the reason.</p>"},{"location":"sources/#api-endpoints","title":"API Endpoints","text":"<p>All source endpoints require authentication.</p>"},{"location":"sources/#source-management","title":"Source management","text":"Method Path Description <code>GET</code> <code>/v1/sources</code> List all sources <code>POST</code> <code>/v1/sources</code> Create a user source <code>GET</code> <code>/v1/sources/component/{componentId}</code> List sources for a component <code>GET</code> <code>/v1/sources/{id}</code> Get a source by ID <code>PUT</code> <code>/v1/sources/{id}</code> Update a source <code>DELETE</code> <code>/v1/sources/{id}</code> Delete a source"},{"location":"sources/#version-management","title":"Version management","text":"Method Path Description <code>GET</code> <code>/v1/sources/{id}/versions</code> List discovered versions <code>GET</code> <code>/v1/sources/{id}/versions/types</code> Get version type breakdown <code>DELETE</code> <code>/v1/sources/{id}/versions</code> Clear cached versions"},{"location":"sources/#sync","title":"Sync","text":"Method Path Description <code>POST</code> <code>/v1/sources/{id}/sync</code> Trigger version sync <code>GET</code> <code>/v1/sources/{id}/sync/status</code> Get sync job status"},{"location":"sources/#forge-utilities","title":"Forge utilities","text":"Method Path Description <code>POST</code> <code>/v1/forge/detect</code> Detect forge type from URL <code>POST</code> <code>/v1/forge/preview-filter</code> Preview filter effect on versions <code>GET</code> <code>/v1/forge/types</code> List all forge types <code>GET</code> <code>/v1/forge/common-filters</code> List common filter presets"},{"location":"blog/","title":"Blog","text":""}]}